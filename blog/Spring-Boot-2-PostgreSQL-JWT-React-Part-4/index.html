<!-- This layout is used in all pages. Making changes here will efect all pages. We recommend not to change anything here. --> <!DOCTYPE html><html lang="en"> <!----><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="google-site-verification" content="Cghc1HFx2GBn1D5ans5vLlaX-pme-BY2wJpaLqHs_H0" /><meta name=”keywords” content=”java, openshift, docker, Michal Fabjanski, Fabjanski, github, jekyll, programming, spring, hibernate, spring boot, kubernetes” /><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"><link rel="dns-prefetch" href="//ajax.googleapis.com"><link rel="dns-prefetch" href="//fonts.gstatic.com"><link rel="dns-prefetch" href="https://dev-diary-2.disqus.com/"><title>Spring Boot 2 + PostgreSQL + JWT + React - Full Stack Web Development - Part 4 Creating a frontend in React | Devdiaries</title><meta name="generator" content="Jekyll v3.8.4" /><meta property="og:title" content="Spring Boot 2 + PostgreSQL + JWT + React - Full Stack Web Development - Part 4 Creating a frontend in React" /><meta name="author" content="Michal Fabjanski" /><meta property="og:locale" content="en_US" /><meta name="description" content="In previous posts, we have created a fully working application in Spring Boot 2. Now it’s time to create a frontend that will communicate with our backend. If you have not read previous posts, I invite you to read. Requirements Node and NPM installed (You can download it from here) Creating the React project Before we start coding, we have to create React project: Open the shell terminal and execute the following command: npx create-react-app wallet-ui Type following command: wallet-ui Start npm by executing: npm start On the http://localhost:3000/ you should see the start page of the project in React: Changing the default appearance Our design will be very simple. Our app.js looks like this: import React, {Component} from &#39;react&#39;; import &#39;./App.css&#39;;" /><meta property="og:description" content="In previous posts, we have created a fully working application in Spring Boot 2. Now it’s time to create a frontend that will communicate with our backend. If you have not read previous posts, I invite you to read. Requirements Node and NPM installed (You can download it from here) Creating the React project Before we start coding, we have to create React project: Open the shell terminal and execute the following command: npx create-react-app wallet-ui Type following command: wallet-ui Start npm by executing: npm start On the http://localhost:3000/ you should see the start page of the project in React: Changing the default appearance Our design will be very simple. Our app.js looks like this: import React, {Component} from &#39;react&#39;; import &#39;./App.css&#39;;" /><link rel="canonical" href="https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/" /><meta property="og:url" content="https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/" /><meta property="og:site_name" content="Devdiaries" /><meta property="og:image" content="https://www.devdiaries.net/images/spring-react-currency-walet/header-image-part4.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-06-24T00:00:00+00:00" /><script type="application/ld+json"> {"description":"In previous posts, we have created a fully working application in Spring Boot 2. Now it’s time to create a frontend that will communicate with our backend. If you have not read previous posts, I invite you to read. Requirements Node and NPM installed (You can download it from here) Creating the React project Before we start coding, we have to create React project: Open the shell terminal and execute the following command: npx create-react-app wallet-ui Type following command: wallet-ui Start npm by executing: npm start On the http://localhost:3000/ you should see the start page of the project in React: Changing the default appearance Our design will be very simple. Our app.js looks like this: import React, {Component} from &#39;react&#39;; import &#39;./App.css&#39;;","headline":"Spring Boot 2 + PostgreSQL + JWT + React - Full Stack Web Development - Part 4 Creating a frontend in React","dateModified":"2019-06-24T00:00:00+00:00","datePublished":"2019-06-24T00:00:00+00:00","image":"https://www.devdiaries.net/images/spring-react-currency-walet/header-image-part4.jpg","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/"},"url":"https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/","author":{"@type":"Person","name":"Michal Fabjanski"},"@context":"https://schema.org"}</script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Replace these icons with your own. --><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/apple-icon-152x152.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/android-icon-192x192.png"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="icon" href="/favicon.ico" type="image/x-icon"><link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> <!-- Google Analytics code.<head> tag is the right place for analytics code as directed by Google. This is unofficial light version which loads blazing fast! Implemented for faster page load. --><script src="https://cdn.jsdelivr.net/npm/ga-lite@1/dist/ga-lite.min.js" async></script><script> var galite = galite || {}; galite.UA = 'UA-139553005-1';</script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js"></script></head><body><div class="loader"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div><div class="wrapper"><div class="container-grid"><div class="sidebar"><div class="author-container shadow"><div class="author"><img src="/images/ja.jpg" width="100%" height="auto;" alt="Devdiaries" onclick="location.href='/'"></div><div class="about text-center"><h1 class="title"><a href="/">Devdiaries</a></h1></div><div class="bio text-center"><p class="m0">Michael`s Blog</p></div><hr class="dashed"><div class="social text-center"> <ul class="portfolio p0"> <li><a href="/about/">About Me</a></li> <li><a href="/categories/">Categories</a></li> <li><a href="/contact/">Contact</a></li> </ul> <ul class="sm p0 m0a"> <li><a target="_blank" href="https://www.linkedin.com/in/michal-fabjanski"><i class="fa fa-linkedin"></i></a></li> <li><a target="_blank" href="https://github.com/MichalFab"><i class="fa fa-github"></i></a></li> <li><a target="_blank" href="https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=michael.fabjanski%40gmail.com&item_name=blog-donation&currency_code=USD&source=url"><i class="fa fa-paypal"></i></a></li> <li><a target="_blank" href="https://www.devdiaries.net/feed.xml"><i class="fa fa-rss"></i></a></li> </ul></div></div></div><div class="main"><div class="main-container shadow"><div class="title-space"> <h2>Spring Boot 2 + PostgreSQL + JWT + React - Full Stack Web Development - Part 4 Creating a frontend in React</h2></div><hr class="dashed"> <main> <ul class="breadcrumbs"> <li><a href="/">Home</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="#">Spring boot 2 pos...</a></li> </ul><div class="meta"> <p> <small> <span> <i class="fa fa-calendar" aria-hidden="true"></i> 24 Jun 2019&nbsp; </span> <span> <i class="fa fa-user" aria-hidden="true"></i> Michal Fabjanski&nbsp; </span> <span> <i class="fa fa-clock-o" aria-hidden="true"></i> 26 mins read. </span> </small> </p></div><div class="featured-image" style="background-image: url(/images/spring-react-currency-walet/header-image-part4.jpg)"></div><article> <ul class="toc rev clearfix"> <li><a href="#requirements">Requirements</a></li> <li><a href="#creating-the-react-project">Creating the React project</a></li> <li><a href="#changing-the-default-appearance">Changing the default appearance</a></li> <li><a href="#creating-crud-functionalities">Creating CRUD functionalities</a> <ul> <li><a href="#fetching-data-from-the-backend">Fetching data from the backend</a></li> <li><a href="#using-the-react-table-to-display-data">Using the react-table to display data</a></li> <li><a href="#add-new-currency-functionality">Add new currency functionality</a></li> <li><a href="#edit-and-remove-functionality">Edit and Remove functionality</a></li> </ul> </li> <li><a href="#adding-login-functionality-with-jwt">Adding login functionality with JWT</a></li> <li><a href="#summary">Summary</a></li> </ul> <p>In <a href="http://devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-3/">previous posts</a>, we have created a fully working application in Spring Boot 2. Now it’s time to create a frontend that will communicate with our backend. If you have not read previous posts, I invite you to read.</p> <h3 id="requirements">Requirements</h3> <ul> <li>Node and NPM installed (You can <a href="https://nodejs.org/en/">download it from here</a>)</li> </ul> <h3 id="creating-the-react-project">Creating the React project</h3> <p>Before we start coding, we have to create React project:</p> <ol> <li>Open the shell terminal and execute the following command:<br /> <code class="highlighter-rouge">npx create-react-app wallet-ui</code></li> <li>Type following command: <code class="highlighter-rouge">wallet-ui</code></li> <li>Start npm by executing: <code class="highlighter-rouge">npm start</code></li> </ol> <p>On the <code class="highlighter-rouge">http://localhost:3000/</code> you should see the start page of the project in React:</p> <p><img src="/images/spring-react-currency-walet/react-project.JPG" alt="react-project" /></p> <h3 id="changing-the-default-appearance">Changing the default appearance</h3> <p>Our design will be very simple. Our app.js looks like this:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">'./App.css'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">header</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"Header"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App-title"</span><span class="o">&gt;</span><span class="nx">Currencies</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="sr">/header</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>  </code></pre></figure> <p>And the <code class="highlighter-rouge">App.css</code> file:</p> <figure class="highlight"><pre><code class="language-css" data-lang="css">    
<span class="nc">.App</span> <span class="p">{</span>    
  <span class="nl">text-align</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>    
<span class="p">}</span>    
    
<span class="nc">.Header</span> <span class="p">{</span>    
  <span class="nl">background-color</span><span class="p">:</span> <span class="n">rgba</span><span class="p">(</span><span class="m">169</span><span class="p">,</span> <span class="m">67</span><span class="p">,</span> <span class="m">63</span><span class="p">,</span> <span class="m">0.71</span><span class="p">);</span>    
  <span class="nl">height</span><span class="p">:</span> <span class="m">150px</span><span class="p">;</span>    
  <span class="nl">padding</span><span class="p">:</span> <span class="m">55px</span><span class="p">;</span>    
  <span class="nl">color</span><span class="p">:</span> <span class="no">cornsilk</span><span class="p">;</span>    
<span class="p">}</span>  </code></pre></figure> <h3 id="creating-crud-functionalities">Creating CRUD functionalities</h3> <p>Firstly, we will create a component with the currencies table with paging, filtering and sorting rows/columns. In previous posts, we have created localhost:8080/currencies in our backend. Now we will use it to list all currencies in the frontend. <br /> We will start by creating a catalog for components. Create the <code class="highlighter-rouge">components</code> folder in the main project directory. Then create the <code class="highlighter-rouge">Currencies.js</code> file:</p> <p><img src="/images/spring-react-currency-walet/react-with-currency-component.JPG" alt="react-with-currency-component" /></p> <p><code class="highlighter-rouge">Currencies.js</code> will be our React component. A React component is a JavaScript class or function that optionally accepts inputs i.e. properties(props) and returns a React element that describes how a section of the UI should appear:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">           
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Currencies</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">currencies</span><span class="p">:</span> <span class="p">[]};</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App"</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Currencies</span><span class="p">;</span>           </code></pre></figure> <p>Now update the <code class="highlighter-rouge">App.js</code> adding a new component - the<code class="highlighter-rouge"> &lt;Currencies /&gt; </code>:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">           
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">'./App.css'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Currencies</span> <span class="k">from</span> <span class="s2">"./components/Currencies"</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">header</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"Header"</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App-title"</span><span class="o">&gt;</span><span class="nx">Currencies</span><span class="o">&lt;</span><span class="sr">/h1</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="sr">/header</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="nx">Currencies</span><span class="o">/&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>     </code></pre></figure> <h4 id="fetching-data-from-the-backend">Fetching data from the backend</h4> <p>To connect via HTTP we will use the <em>Fetch API</em>. The Fetch API provides the <code class="highlighter-rouge">fetch()</code> method of which we pass the path to the HTTP resource. In our case, it will be the URL of the backend:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
       <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies'</span><span class="p">)</span>  
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>  
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">responseData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>  
                <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>  
                    <span class="na">currencies</span><span class="p">:</span> <span class="nx">responseData</span>  
                <span class="p">})</span>  
            <span class="p">})</span>  
 </code></pre></figure> <p>That’s all we need to do to get data from the external API. But when the data should be fetched? The best place to fetch data is <a href="https://reactjs.org/docs/react-component.html#componentdidmount"><code class="highlighter-rouge">componentDidMount()</code></a>. React’s lifecycle method. When this method runs, the component was already rendered with the <code class="highlighter-rouge">render()</code> method so we have a guarantee that data won’t be loaded until after the initial render.</p> <p>There is one more thing to keep in mind. We have secured our application using <em>JWT</em>. The above use of the <code class="highlighter-rouge">fetch()</code> method will not work. We need to add the Authorization header with the generated jwt token.<br /> I generated a JWT token with Postman, then I injected it as a header in the <code class="highlighter-rouge">fetch()</code> method (You must generate the JWT token yourself. <a href="http://devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-3/#summary">I showed how to do it in the previous post</a>).</p> <p>Now, we will add a simple display of the data fetched from the backend:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Currencies</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">currencies</span><span class="p">:</span> <span class="p">[]};</span>
    <span class="p">}</span>

    <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies'</span><span class="p">,</span> <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTU2MTM4OTMyNn0.tVF719msAK-lanUq_Joupae5K1c80EKrjWSeuALFQPP2pyHM2nTDM54dBcB40IrhwU5zIVP3aR82fb6EJqEc6Q"</span><span class="p">}</span> <span class="p">})</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">responseData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
                    <span class="na">currencies</span><span class="p">:</span> <span class="nx">responseData</span>
                <span class="p">})</span>
            <span class="p">})</span>
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">tableRows</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">currency</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span>
            <span class="o">&lt;</span><span class="nx">tr</span> <span class="nx">key</span><span class="o">=</span><span class="p">{</span><span class="nx">index</span><span class="p">}</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currency</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/td</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currency</span><span class="p">.</span><span class="nx">code</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/td</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currency</span><span class="p">.</span><span class="nx">amount</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/td</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="nx">td</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">currency</span><span class="p">.</span><span class="nx">rate</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/td</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/tr</span><span class="err">&gt;
</span>        <span class="p">);</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App"</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="nx">table</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="nx">tbody</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">tableRows</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/tbody</span><span class="err">&gt;
</span>                <span class="o">&lt;</span><span class="sr">/table</span><span class="err">&gt;
</span>            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Currencies</span><span class="p">;</span>   </code></pre></figure> <p>Result:<br /> <img src="/images/spring-react-currency-walet/react-fetched-data.JPG" alt="react-fetched-data" /></p> <h4 id="using-the-react-table-to-display-data">Using the react-table to display data</h4> <p>We will use <em>React Table</em> to display currencies. Reac Table allows to display tabular data client-side, and provides sorting, filtering, and pagination over that data. To install a react-table in our application, run the <code class="highlighter-rouge">npm install reactable --save</code> command in the main project directory and restart the application.</p> <p>Now we have to remove the current table in the <code class="highlighter-rouge">render()</code> method and define the new one with react-table. If you want to configure the table in a different way, read the following doc: <a href="https://www.npmjs.com/package/react-table">https://www.npmjs.com/package/react-table</a>.</p> <p>Updated <code class="highlighter-rouge">render()</code> method:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="nx">render</span><span class="p">()</span>
<span class="p">{</span>

    <span class="kd">const</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[{</span>
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Currency'</span><span class="p">,</span>
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'name'</span><span class="p">,</span>
        <span class="na">Cell</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">editable</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Code'</span><span class="p">,</span>
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'code'</span><span class="p">,</span>
        <span class="na">Cell</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">editable</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Amount'</span><span class="p">,</span>
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'amount'</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Rate'</span><span class="p">,</span>
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'rate'</span>
    <span class="p">}</span>
        <span class="p">,];</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nx">ReactTable</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">}</span> <span class="nx">columns</span><span class="o">=</span><span class="p">{</span><span class="nx">columns</span><span class="p">}</span> <span class="nx">filterable</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span><span class="sr">/</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
<span class="p">}</span>  </code></pre></figure> <p>The effect looks much better:<br /> <img src="/images/spring-react-currency-walet/currencies-react-table.JPG" alt="currencies-react-table" /></p> <h4 id="add-new-currency-functionality">Add new currency functionality</h4> <p>Let’s add functionality to adding new currencies. We will start with creating a new component - <code class="highlighter-rouge">AddCurrency.js</code> in the <code class="highlighter-rouge">components</code> directory. <br /> We will implement an add functionality with React Skylight component. SkyLight is a simple react component for modals and dialogs. Install a component like a react-table: <code class="highlighter-rouge">npm install react-skylight --save</code><br /> The following source code shows the <code class="highlighter-rouge">AddCurrency.js</code> code:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>    
<span class="k">import</span> <span class="nx">SkyLight</span> <span class="k">from</span> <span class="s1">'react-skylight'</span><span class="p">;</span>    
    
<span class="kd">class</span> <span class="nx">AddCurrency</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>    
    
 <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>    
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">code</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">rate</span><span class="p">:</span> <span class="s1">''</span><span class="p">};</span>    
    <span class="p">}</span>    
    
    <span class="nx">handleChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
        <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">(</span>    
            <span class="p">{[</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">]:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">}</span>    
        <span class="p">);</span>    
    <span class="p">};</span>    
    
    <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>    
        <span class="kd">var</span> <span class="nx">currency</span> <span class="o">=</span> <span class="p">{</span><span class="na">name</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="na">code</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">code</span><span class="p">,</span> <span class="na">amount</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">amount</span><span class="p">,</span> <span class="na">rate</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">rate</span><span class="p">};</span>    
        <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">addCurrency</span><span class="p">(</span><span class="nx">currency</span><span class="p">);</span>    
        <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">addDialog</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>    
    <span class="p">}</span>    
    
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>    
        <span class="k">return</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                <span class="o">&lt;</span><span class="nx">SkyLight</span> <span class="nx">hideOnOverlayClicked</span> <span class="nx">ref</span><span class="o">=</span><span class="s2">"addDialog"</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">h3</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">Currency</span><span class="o">&lt;</span><span class="sr">/h3&gt;   </span><span class="err"> 
</span>                    <span class="o">&lt;</span><span class="nx">form</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"Name"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"name"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="sr">/&gt;&lt;br/</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"Code"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"code"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="sr">/&gt;&lt;br/</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"Amount"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"amount"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="sr">/&gt;&lt;br/</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"Rate"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"rate"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span><span class="sr">/&gt;&lt;br/</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleSubmit</span><span class="p">}</span><span class="o">&gt;</span><span class="nx">Add</span><span class="o">&lt;</span><span class="sr">/button&gt;   </span><span class="err"> 
</span>                    <span class="o">&lt;</span><span class="sr">/form&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="sr">/SkyLight&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span> <span class="p">{</span><span class="s1">'margin'</span><span class="p">:</span> <span class="s1">'10px'</span><span class="p">}</span> <span class="p">}</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">refs</span><span class="p">.</span><span class="nx">addDialog</span><span class="p">.</span><span class="nx">show</span><span class="p">()}</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">currency</span><span class="o">&lt;</span><span class="sr">/button&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>        <span class="p">)</span>    
    <span class="p">}</span>    
    
    
<span class="p">}</span>    
    
<span class="k">export</span> <span class="k">default</span> <span class="nx">AddCurrency</span><span class="p">;</span>  </code></pre></figure> <p>We added the form inside the <code class="highlighter-rouge">render()</code>. It contains the Skylight component with buttons and the input fields for adding the currency. We also added a button that opens the modal window - it will be shown in the Currencies component.</p> <p>Import the <code class="highlighter-rouge">AddCurrency</code> component inside the <code class="highlighter-rouge">Currencies.js</code> by adding:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="k">import</span> <span class="nx">AddCurrency</span> <span class="k">from</span> <span class="s1">'./AddCurrency'</span><span class="p">;</span>  </code></pre></figure> <p>And update the <code class="highlighter-rouge">render()</code> method in the <code class="highlighter-rouge">Currencies.js</code> with addCurrency component:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="k">return</span> <span class="p">(</span>    
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
        <span class="o">&lt;</span><span class="nx">AddCurrency</span> <span class="nx">addCurrency</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">addCurrency</span><span class="p">}</span>  <span class="nx">fetchCurrencies</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">}</span><span class="sr">/&gt;   </span><span class="err"> 
</span>        <span class="o">&lt;</span><span class="nx">ReactTable</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">}</span>  <span class="nx">columns</span><span class="o">=</span><span class="p">{</span><span class="nx">columns</span><span class="p">}</span>  <span class="nx">filterable</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span><span class="sr">/&gt;   </span><span class="err"> 
</span>    <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span><span class="p">);</span>  </code></pre></figure> <p>After refreshing the page you should see the “Add Currency” button. After clicking on it, you will see a window with inputs to complete:<br /> <img src="/images/spring-react-currency-walet/add-currency.JPG" alt="add-currency" /><br /> <img src="/images/spring-react-currency-walet/add-currency2.JPG" alt="add-currency-button" /></p> <h4 id="edit-and-remove-functionality">Edit and Remove functionality</h4> <p>Currencies can be deleted/updated in the database by sending the DELETE/PUT HTTP method request to the backend. We will start by adding new columns with buttons to the react-table using <code class="highlighter-rouge">Cell</code> . We do not want to enable sorting and filtering functionalities for this column so we have to set props to false. <br /> The final code of the table is shown below:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>    
    
 <span class="kd">const</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[{</span>        
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Currency'</span><span class="p">,</span>    
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'name'</span><span class="p">,</span>    
        <span class="na">Cell</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">editable</span>    
 <span class="p">},</span> <span class="p">{</span>    
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Code'</span><span class="p">,</span>    
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'code'</span><span class="p">,</span>    
        <span class="na">Cell</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">editable</span>    
  <span class="p">},</span> <span class="p">{</span>    
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Amount'</span><span class="p">,</span>    
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'amount'</span>    
  <span class="p">},</span> <span class="p">{</span>    
        <span class="na">Header</span><span class="p">:</span> <span class="s1">'Rate'</span><span class="p">,</span>    
        <span class="na">accessor</span><span class="p">:</span> <span class="s1">'rate'</span>    
  <span class="p">},</span> <span class="p">{</span>    
        <span class="na">sortable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
        <span class="na">filterable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
        <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>    
        <span class="na">Cell</span><span class="p">:</span> <span class="nx">row</span> <span class="o">=&gt;</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">onDelClick</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">original</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Delete</span><span class="o">&lt;</span><span class="sr">/button&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>        <span class="p">)</span>    
    <span class="p">},</span> <span class="p">{</span>    
        <span class="na">sortable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
        <span class="na">filterable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
        <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>    
        <span class="na">Cell</span><span class="p">:</span> <span class="nx">row</span> <span class="o">=&gt;</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateCurrency</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">original</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Save</span><span class="o">&lt;</span><span class="sr">/button&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>        <span class="p">)</span>    
    <span class="p">}</span>    
    
 <span class="p">,]</span>    
    <span class="k">return</span> <span class="p">(</span>    
        <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
            <span class="o">&lt;</span><span class="nx">AddCurrency</span> <span class="nx">addCurrency</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">addCurrency</span><span class="p">}</span>  <span class="nx">fetchCurrencies</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">}</span><span class="sr">/&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="nx">ReactTable</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">}</span>  <span class="nx">columns</span><span class="o">=</span><span class="p">{</span><span class="nx">columns</span><span class="p">}</span>  <span class="nx">filterable</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span><span class="sr">/&gt;   </span><span class="err"> 
</span>        <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span><span class="p">);</span> <span class="p">}</span>  </code></pre></figure> <p>Now, we have to implement two methods: <code class="highlighter-rouge">onDelClick()</code> and <code class="highlighter-rouge">updateCurrency()</code>. After each change, we need to re-collect currencies from the backend. In order not to repeat the code, let us move the functionality to fetch the data for the separate method <code class="highlighter-rouge">fetchCurrencies()</code>:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="nx">fetchCurrencies</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies'</span><span class="p">,</span>    
        <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTU2MTIyNDA3MH0._AdhZ_KDhWRmaxejYht9qtViH0TfouGUxQPCC12U_UPKLNYf7QafjtiP_BkSt8i_wNrHk4E4mzaPXErsjDH0_g"</span><span class="p">,</span> <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">}})</span>    
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>    
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">responseData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
            <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>    
                <span class="na">currencies</span><span class="p">:</span> <span class="nx">responseData</span>    
            <span class="p">})</span>    
        <span class="p">})</span>    
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">"error: "</span> <span class="o">+</span> <span class="nx">err</span><span class="p">));</span>    
<span class="p">}</span>  </code></pre></figure> <p>The <code class="highlighter-rouge">onDelClick()</code> method implementation:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="nx">onDelClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">confirm</span><span class="p">(</span><span class="s1">'Are you sure to delete currency?'</span><span class="p">))</span> <span class="p">{</span>    
        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies/'</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span> <span class="p">{</span>    
            <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>    
            <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>    
                <span class="s2">"Authorization"</span><span class="p">:</span> <span class="s2">"Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTU2MTEwNTA0MH0.9PF5R4DA6rZQhoOLBn1l48VW4sgGmYjca8abazExtYxhCh9I5oV2z1_Ywalu46xioKph0Zo7OEXIb96WeNoALw"</span>    
  <span class="p">})</span>    
        <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">())</span>    
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>    
    <span class="p">}</span>    
<span class="p">};</span>  </code></pre></figure> <p>And the <code class="highlighter-rouge">onDelClick()</code> method implementation:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="nx">updateCurrency</span><span class="p">(</span><span class="nx">currency</span><span class="p">)</span> <span class="p">{</span>    
    <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies'</span><span class="p">,</span> <span class="p">{</span>    
        <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>    
        <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>    
            <span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">yourJWT</span><span class="p">,</span>    
            <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span>    
  <span class="p">},</span>    
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">currency</span><span class="p">)</span>    
    <span class="p">})</span>    
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">())</span>    
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>    
<span class="p">}</span>  </code></pre></figure> <p>Finally, we need to add the <code class="highlighter-rouge">editable</code> function, which will allow us to edit the table’s cells:</p> <figure class="highlight"><pre><code class="language-css" data-lang="css">  
    <span class="nt">editable</span> <span class="o">=</span> <span class="o">(</span><span class="nt">cell</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="err">return</span> <span class="err">(</span>
            <span class="err">&lt;div</span> <span class="err">style={</span> <span class="err">{</span><span class="py">backgroundColor</span><span class="p">:</span> <span class="s1">"#fafafa"</span><span class="p">}</span> <span class="err">}</span> <span class="nt">contentEditable</span> <span class="nt">suppressContentEditableWarning</span> <span class="nt">onBlur</span><span class="o">=</span><span class="p">{</span><span class="err">e</span> <span class="err">=&gt;</span> <span class="err">{</span>
                <span class="err">const</span> <span class="err">curr</span> <span class="err">=</span> <span class="err">[...this.state.currencies];</span>
                <span class="err">curr[cell.index][cell.column.id]</span> <span class="err">=</span> <span class="err">e.target.innerHTML;</span>
                <span class="err">this.setState({</span><span class="py">currencies</span><span class="p">:</span> <span class="n">curr</span><span class="p">}</span><span class="o">);</span>
            <span class="err">}}</span>
                 <span class="nt">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{</span> <span class="err">{</span><span class="py">__html</span><span class="p">:</span> <span class="n">this</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">currencies</span><span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">index</span><span class="p">][</span><span class="n">cell</span><span class="p">.</span><span class="n">column</span><span class="p">.</span><span class="n">id</span><span class="p">]}</span> <span class="err">}</span>
            <span class="o">/&gt;</span>
        <span class="o">);</span>
    <span class="err">}</span><span class="o">;</span></code></pre></figure> <p>Buttons appeared. The functionality for editing and deleting data works correctly!<img src="/images/spring-react-currency-walet/editable-react-table.JPG" alt="editable-react-table" /></p> <h3 id="adding-login-functionality-with-jwt">Adding login functionality with JWT</h3> <p>For the application to work properly, we still need to implement the user’s login functionality. Let’s start by creating a new <code class="highlighter-rouge">Login.js</code> component in the<code class="highlighter-rouge"> components</code> folder:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>

<span class="kd">class</span> <span class="nx">Login</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">username</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">isAuthenticated</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">open</span><span class="p">:</span> <span class="kc">false</span><span class="p">};</span>
    <span class="p">}</span>

    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>
        <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">Login</span><span class="p">;</span>  </code></pre></figure> <p>We are going to use bootstrap styles in the Login page. Install the following component: <code class="highlighter-rouge">npm install --save bootstrap</code> and add <code class="highlighter-rouge">import 'bootstrap/dist/css/bootstrap.min.css';</code> at the beginning of <code class="highlighter-rouge">Login.js</code>.<br /> Update <code class="highlighter-rouge">render()</code> method by adding login form:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">    
<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>    
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">isAuthenticated</span> <span class="o">===</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>    
        <span class="k">return</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">Currencies</span> <span class="o">/&gt;</span><span class="p">)</span>    
    <span class="p">}</span>    
    <span class="k">else</span> <span class="p">{</span>    
        <span class="k">return</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"login"</span><span class="o">&gt;</span>    
                <span class="o">&lt;</span><span class="nx">h3</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"text-center text-white pt-5"</span><span class="o">&gt;</span><span class="nx">Login</span> <span class="nx">form</span><span class="o">&lt;</span><span class="sr">/h3&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"container"</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"login-row"</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"row justify-content-center align-items-center"</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"login-column"</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"col-md-6"</span><span class="o">&gt;</span>    
                     <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"login-box"</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"col-md-12"</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"form-group"</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"username"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span>  <span class="nx">className</span><span class="o">=</span><span class="s2">"form-control"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"username"</span> <span class="o">/&gt;</span>    
                    <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>                    <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"form-group"</span><span class="o">&gt;</span>    
                        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"password"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"password"</span> <span class="nx">onChange</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleChange</span><span class="p">}</span>  <span class="nx">className</span><span class="o">=</span><span class="s2">"form-control"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"password"</span> <span class="o">/&gt;</span>    
                    <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>                         <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">login</span><span class="p">}</span>  <span class="nx">className</span><span class="o">=</span><span class="s2">"btn btn-info btn-md"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"Login"</span><span class="o">/&gt;</span>    
                     <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>                    <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>                    <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>    
 <span class="p">);}</span> <span class="p">}</span>  </code></pre></figure> <p>If the user is already authenticated (isAuthenticated is true), the <code class="highlighter-rouge">Currencies</code> component will be displayed. Let’s now implement the methods used in the form.<br /> The <code class="highlighter-rouge">handleChange()</code> method for handling the changes from the form:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">   
 <span class="nx">handleChange</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({[</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="p">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">});</span>    
<span class="p">}</span>  </code></pre></figure> <p>And the login function:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">   
 <span class="nx">login</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>    
    <span class="kd">const</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span><span class="na">userName</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="na">password</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">password</span><span class="p">};</span>    
    <span class="nx">fetch</span><span class="p">(</span><span class="s2">"http://localhost:8080/"</span> <span class="o">+</span> <span class="s1">'login'</span><span class="p">,</span> <span class="p">{</span>    
        <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>    
        <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span>    
    <span class="p">})</span>    
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="p">{</span>    
            <span class="kd">const</span> <span class="nx">jwtToken</span> <span class="o">=</span> <span class="nx">res</span><span class="p">.</span><span class="nx">headers</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s1">'Authorization'</span><span class="p">);</span>    
            <span class="k">if</span> <span class="p">(</span><span class="nx">jwtToken</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>    
                <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">"jwt"</span><span class="p">,</span> <span class="nx">jwtToken</span><span class="p">);</span>    
                <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">isAuthenticated</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>    
            <span class="p">}</span>    
            <span class="k">else</span> <span class="p">{</span>    
                <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">open</span><span class="p">:</span> <span class="kc">true</span><span class="p">});</span>    
            <span class="p">}</span>    
        <span class="p">})</span>    
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>    
<span class="p">};</span>  </code></pre></figure> <p>The login is done by calling the <code class="highlighter-rouge">/login</code> endpoint with the POST HTTP method (we are sending the user object inside the request body). If the backend authenticates the provided user, we get an Authorization header in the response. We get a JWT token and save to session storage.</p> <p>Now we need to update <code class="highlighter-rouge">App.js</code> to display the <code class="highlighter-rouge">&lt;Login /&gt;</code> component instead of <code class="highlighter-rouge">&lt;Currencies /&gt;</code>:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">   
 <span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>    
<span class="k">import</span> <span class="s1">'./App.css'</span><span class="p">;</span>    
<span class="k">import</span> <span class="nx">Login</span> <span class="k">from</span> <span class="s1">'./components/Login'</span>    
    
<span class="kd">class</span> <span class="nx">App</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>    
    <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>    
        <span class="k">return</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App"</span><span class="o">&gt;</span>    
                <span class="o">&lt;</span><span class="nx">header</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"Header"</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">h1</span> <span class="nx">className</span><span class="o">=</span><span class="s2">"App-title"</span><span class="o">&gt;</span><span class="nx">Currencies</span><span class="o">&lt;</span><span class="sr">/h1&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="sr">/header&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="nx">Login</span><span class="o">/&gt;</span>    
            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>        <span class="p">)</span>    
    <span class="p">}</span>    
<span class="p">}</span>    
    
<span class="k">export</span> <span class="k">default</span> <span class="nx">App</span><span class="p">;</span>  </code></pre></figure> <p>We also have to update the <code class="highlighter-rouge">Currencies.js</code> so that each time we use the<code class="highlighter-rouge">fetch()</code>method, it retrieves the JWT from <code class="highlighter-rouge">sessionStorage</code> and sends it to the Authorization header. The following source code shows the <code class="highlighter-rouge">Currencies.js</code> final code:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript">   
<span class="k">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'react'</span><span class="p">;</span>    
<span class="k">import</span> <span class="nx">ReactTable</span> <span class="k">from</span> <span class="s2">"react-table"</span><span class="p">;</span>    
<span class="k">import</span> <span class="s1">'react-table/react-table.css'</span><span class="p">;</span>    
<span class="k">import</span> <span class="nx">AddCurrency</span> <span class="k">from</span> <span class="s1">'./AddCurrency'</span><span class="p">;</span>    
    
<span class="kd">class</span> <span class="nx">Currencies</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>    
    <span class="kd">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>    
        <span class="k">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>    
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="na">currencies</span><span class="p">:</span> <span class="p">[]};</span>    
    <span class="p">}</span>    
    
 <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>        
 <span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">();</span>    
    <span class="p">}</span>    
    
    <span class="nx">onDelClick</span> <span class="o">=</span> <span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
        <span class="kd">const</span> <span class="nx">jwtToken</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"jwt"</span><span class="p">);</span>    
        <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">confirm</span><span class="p">(</span><span class="s1">'Are you sure to delete currency?'</span><span class="p">))</span> <span class="p">{</span>    
            <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies/'</span> <span class="o">+</span> <span class="nx">id</span><span class="p">,</span> <span class="p">{</span>    
                <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span><span class="p">,</span>    
                <span class="na">headers</span><span class="p">:</span> <span class="k">new</span> <span class="nx">Headers</span><span class="p">({</span>    
                    <span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">jwtToken</span><span class="p">,</span>    
                    <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span>    
 <span class="p">})</span>    
            <span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">())</span>    
                <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">));</span>    
        <span class="p">}</span>    
    <span class="p">};</span>    
    
 <span class="nx">addCurrency</span><span class="p">(</span><span class="nx">currency</span><span class="p">)</span> <span class="p">{</span>        
 <span class="kd">const</span> <span class="nx">jwtToken</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"jwt"</span><span class="p">);</span>    
        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies/'</span><span class="p">,</span> <span class="p">{</span>    
            <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>    
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>    
                <span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">jwtToken</span><span class="p">,</span>    
                <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span>    
 <span class="p">},</span>    
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">currency</span><span class="p">)</span>    
        <span class="p">})</span>    
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">())</span>    
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>    
    <span class="p">}</span>    
    
 <span class="nx">updateCurrency</span><span class="p">(</span><span class="nx">currency</span><span class="p">)</span> <span class="p">{</span>        
 <span class="kd">const</span> <span class="nx">jwtToken</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"jwt"</span><span class="p">);</span>    
        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies'</span><span class="p">,</span> <span class="p">{</span>    
            <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>    
            <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>    
                <span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">jwtToken</span><span class="p">,</span>    
                <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span>    
 <span class="p">},</span>    
            <span class="na">body</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">currency</span><span class="p">)</span>    
        <span class="p">})</span>    
            <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">res</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">())</span>    
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">))</span>    
    <span class="p">}</span>    
    
 <span class="nx">editable</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cell</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>        <span class="k">return</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span> <span class="p">{</span><span class="na">backgroundColor</span><span class="p">:</span> <span class="s2">"#fafafa"</span><span class="p">}</span> <span class="p">}</span>  <span class="nx">contentEditable</span> <span class="nx">suppressContentEditableWarning</span> <span class="nx">onBlur</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="o">=&gt;</span> <span class="p">{</span>    
                <span class="kd">const</span> <span class="nx">curr</span> <span class="o">=</span> <span class="p">[...</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">];</span>    
                <span class="nx">curr</span><span class="p">[</span><span class="nx">cell</span><span class="p">.</span><span class="nx">index</span><span class="p">][</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>    
                <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span><span class="na">currencies</span><span class="p">:</span> <span class="nx">curr</span><span class="p">});</span>    
            <span class="p">}}</span>    
 <span class="nx">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{</span> <span class="p">{</span><span class="na">__html</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">[</span><span class="nx">cell</span><span class="p">.</span><span class="nx">index</span><span class="p">][</span><span class="nx">cell</span><span class="p">.</span><span class="nx">column</span><span class="p">.</span><span class="nx">id</span><span class="p">]}</span> <span class="p">}</span>    
 <span class="sr">/&gt;   </span><span class="err"> 
</span>        <span class="p">);</span>    
    <span class="p">}</span>    
    
    
 <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>    
        <span class="kd">const</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[{</span>    
            <span class="na">Header</span><span class="p">:</span> <span class="s1">'Currency'</span><span class="p">,</span>    
            <span class="na">accessor</span><span class="p">:</span> <span class="s1">'name'</span><span class="p">,</span>    
            <span class="na">Cell</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">editable</span>    
 <span class="p">},</span> <span class="p">{</span>    
            <span class="na">Header</span><span class="p">:</span> <span class="s1">'Code'</span><span class="p">,</span>    
            <span class="na">accessor</span><span class="p">:</span> <span class="s1">'code'</span><span class="p">,</span>    
            <span class="na">Cell</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">editable</span>    
  <span class="p">},</span> <span class="p">{</span>    
            <span class="na">Header</span><span class="p">:</span> <span class="s1">'Amount'</span><span class="p">,</span>    
            <span class="na">accessor</span><span class="p">:</span> <span class="s1">'amount'</span>    
  <span class="p">},</span> <span class="p">{</span>    
            <span class="na">Header</span><span class="p">:</span> <span class="s1">'Rate'</span><span class="p">,</span>    
            <span class="na">accessor</span><span class="p">:</span> <span class="s1">'rate'</span>    
  <span class="p">},</span> <span class="p">{</span>    
            <span class="na">sortable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
            <span class="na">filterable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
            <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>    
            <span class="na">Cell</span><span class="p">:</span> <span class="nx">row</span> <span class="o">=&gt;</span> <span class="p">(</span>    
                <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">onDelClick</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">original</span><span class="p">.</span><span class="nx">id</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Delete</span><span class="o">&lt;</span><span class="sr">/button&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>            <span class="p">)</span>    
        <span class="p">},</span> <span class="p">{</span>    
            <span class="na">sortable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
            <span class="na">filterable</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>    
            <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>    
            <span class="na">Cell</span><span class="p">:</span> <span class="nx">row</span> <span class="o">=&gt;</span> <span class="p">(</span>    
                <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                    <span class="o">&lt;</span><span class="nx">button</span> <span class="nx">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">updateCurrency</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">original</span><span class="p">)}</span><span class="o">&gt;</span><span class="nx">Save</span><span class="o">&lt;</span><span class="sr">/button&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>            <span class="p">)</span>    
        <span class="p">}</span>    
    
 <span class="p">,]</span>    
        <span class="k">return</span> <span class="p">(</span>    
            <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>    
                <span class="o">&lt;</span><span class="nx">AddCurrency</span> <span class="nx">addCurrency</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">addCurrency</span><span class="p">}</span>  <span class="nx">fetchCurrencies</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">fetchCurrencies</span><span class="p">}</span><span class="sr">/&gt;   </span><span class="err"> 
</span>                <span class="o">&lt;</span><span class="nx">ReactTable</span> <span class="nx">data</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">currencies</span><span class="p">}</span>  <span class="nx">columns</span><span class="o">=</span><span class="p">{</span><span class="nx">columns</span><span class="p">}</span>  <span class="nx">filterable</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span><span class="sr">/&gt;   </span><span class="err"> 
</span>            <span class="o">&lt;</span><span class="sr">/div&gt;   </span><span class="err"> 
</span>        <span class="p">);</span>    
    <span class="p">}</span>    
    
    <span class="nx">fetchCurrencies</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>    
        <span class="kd">const</span> <span class="nx">jwtToken</span> <span class="o">=</span> <span class="nx">sessionStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"jwt"</span><span class="p">);</span>    
        <span class="nx">fetch</span><span class="p">(</span><span class="s1">'http://localhost:8080/currencies'</span><span class="p">,</span>    
            <span class="p">{</span><span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="s2">"Authorization"</span><span class="p">:</span> <span class="nx">jwtToken</span><span class="p">,</span> <span class="s2">"Content-Type"</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">}}</span>    
        <span class="p">)</span>    
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>    
            <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">responseData</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>    
                <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>    
                    <span class="na">currencies</span><span class="p">:</span> <span class="nx">responseData</span>    
                <span class="p">})</span>    
            <span class="p">})</span>    
            <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">"error: "</span> <span class="o">+</span> <span class="nx">err</span><span class="p">));</span>    
<span class="p">}</span> <span class="p">}</span>    
    
<span class="k">export</span> <span class="k">default</span> <span class="nx">Currencies</span><span class="p">;</span>  </code></pre></figure> <p>By going to <code class="highlighter-rouge">localhost:3000</code> you should see the login page. After entering the username and password (in our case, admin: admin - we have set this data in our backend) - you will be authenticated and you will have access to the application:<br /> <img src="/images/spring-react-currency-walet/react-loging.JPG" alt="react-loging" /><br /> <img src="/images/spring-react-currency-walet/decdiaries-net-app.JPG" alt="decdiaries-net-app" /></p> <h3 id="summary">Summary</h3> <p>Congratulations, we have created a fully working application, secured by JWT. In the next (last) post we will configure PostreSQL.</p> <p>The source code of the entire application (frontend and backend) is available on Github:</p> <ul> <li>Frontend: <a href="https://github.com/MichalFab/wallet-currencies-ui">Github Repo</a></li> <li>Backend: <a href="https://github.com/MichalFab/wallet-currencies-backend">Github Repo</a></li> </ul> </article> <hr class="dashed"><div class="row rev"><div class="col-md-12"><div class="share-box"> <i class="fa fa-share-alt" aria-hidden="true"></i> <a class="f nostyle" href="https://www.facebook.com/sharer/sharer.php?u=https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-facebook-official fa"></i></a> <a class="t nostyle" href="https://twitter.com/intent/tweet?text=&url=https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter fa"></i></a> <a class="g nostyle" href="https://plus.google.com/share?url=https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-google-plus fa"></i></a> <a class="r nostyle" href="http://www.reddit.com/submit?url=https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-reddit fa"></i></a> <a class="l nostyle" href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/&title=&summary=&source=dev-diary.github.io" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-linkedin fa"></i></a> <a class="e nostyle" href="mailto:?subject=&amp;body=Check&amp;out&amp;this&amp;site&amp;https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/"><i class="fa fa-envelope fa"></i></a></div><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" style="text-align: center;"> <input type="hidden" name="cmd" value="_donations" /> <input type="hidden" name="business" value="michael.fabjanski@gmail.com" /> <input type="hidden" name="item_name" value="blog-donation" /> <input type="hidden" name="currency_code" value="USD" /> <input type="image" src="https://github.com/MichalFab/students-day/blob/master/donate2.png?raw=true" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" /> <img alt="" border="0" src="https://www.paypal.com/en_PL/i/scr/pixel.gif" width="1" height="1" /> </form></div></div><div class="row"><div class="col-md-12"> <p class="categories rev"> <span><a href="/categories/#spring">Spring</a></span> <span><a href="/categories/#java">Java</a></span> <span><a href="/categories/#react">React</a></span></p></div></div><div id="disqus_thread"></div><script> var disqus_config = function () { this.page.url = 'https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/'; this.page.identifier = 'https://www.devdiaries.net/blog/Spring-Boot-2-PostgreSQL-JWT-React-Part-4/'; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://dev-diary-2.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> <!--<div class="comment-loader">--> <!--<button class="comments cards">Comments</button>--> <!--</div>--> <!--<div class="disqus hide">Loading comments&hellip;</div>--> <!--<div class="disqus-loading"></div>--> <!--<script>--> <!--/*--> <!-- disqusLoader.js v1.0--> <!-- A JavaScript plugin for lazy-loading Disqus comments widget.--> <!-- - --> <!-- By Osvaldas Valutis, www.osvaldas.info--> <!-- Available for use under the MIT License--> <!--*/--> <!--(function(b,f,l){var r=function(a){a=a.getBoundingClientRect();return{top:a.top+f.body.scrollTop,left:a.left+f.body.scrollLeft}},t=function(a,c){var d=f.createElement("script");d.src=a;d.async=!0;d.setAttribute("data-timestamp",+new Date);d.addEventListener("load",function(){"function"===typeof c&&c()});(f.head||f.body).appendChild(d)};l=function(a,c){var d,e;return function(){var g=this,f=arguments,b=+new Date;d&&b<d+a?(clearTimeout(e),e=setTimeout(function(){d=b;c.apply(g,f)},a)):(d=b,c.apply(g,--> <!--f))}};var m=!1,n=!1,p=!1,k=!1,h="unloaded",e=!1,q=function(){if(!e||!f.body.contains(e)||"loaded"==e.disqusLoaderStatus)return!0;var a=b.pageYOffset,c=r(e).top;if(c-a>b.innerHeight*n||0<a-c-e.offsetHeight-b.innerHeight*n)return!0;(a=f.getElementById("disqus_thread"))&&a.removeAttribute("id");e.setAttribute("id","disqus_thread");e.disqusLoaderStatus="loaded";"loaded"==h?DISQUS.reset({reload:!0,config:p}):(b.disqus_config=p,"unloaded"==h&&(h="loading",t(k,function(){h="loaded"})))};b.addEventListener("scroll",--> <!--l(m,q));b.addEventListener("resize",l(m,q));b.disqusLoader=function(a,c){var d={laziness:1,throttle:250,scriptUrl:!1,disqusConfig:!1},b=c,g,h={};for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g]);for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(h[g]=b[g]);c=h;n=c.laziness+1;m=c.throttle;p=c.disqusConfig;k=!1===k?c.scriptUrl:k;e="string"===typeof a?f.querySelector(a):"number"===typeof a.length?a[0]:a;e.disqusLoaderStatus="unloaded";q()}})(window,document,0);--> <!--</script>--> <!--<script>--> <!-- disqusLoader( '.disqus',--> <!-- {--> <!-- scriptUrl: '//{"shortname"=>"dev-diary-2"}.disqus.com/embed.js',--> <!-- disqusConfig: function()--> <!-- {--><script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script> $(document).ready(function () { $(".loader").hide(); });</script><script> $("#search-input").keyup(function () { $("main").hide(); $("search-container").show(); if (!$('#search-input').val()) { $("main").show(); $("search-container").hide(); } });</script><script src="/js/jekyll-search.min.js" type="text/javascript"></script><script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-container'), searchResultTemplate: '<a class="nostyle" href="{url}"><div class="blog borders cards"><div class="image" style="background-image: url({image});"></div><div class="content"><h3 class="title">{title}</h3><p class="description">{description}</p></div></div></a>', noResultsText: 'No results found', json: '/search.json' })</script><script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script><script> AOS.init({ duration: 600, once: true, disable: 'mobile' });</script><script> $("button").click(function () { $(".disqus").toggle(); $(".comments").toggle(); });</script></body></html>