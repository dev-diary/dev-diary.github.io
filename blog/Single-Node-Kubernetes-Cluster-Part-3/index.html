<!-- This layout is used in all pages. Making changes here will efect all pages. We recommend not to change anything here. --> <!DOCTYPE html><html lang="en"> <!----><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="google-site-verification" content="Cghc1HFx2GBn1D5ans5vLlaX-pme-BY2wJpaLqHs_H0" /><meta name=”keywords” content=”java, openshift, docker, Michal Fabjanski, Fabjanski, github, jekyll, programming, spring, hibernate, spring boot, kubernetes” /><link rel="dns-prefetch" href="//fonts.googleapis.com"><link rel="dns-prefetch" href="//google-analytics.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com"><link rel="dns-prefetch" href="//ajax.googleapis.com"><link rel="dns-prefetch" href="//fonts.gstatic.com"><link rel="dns-prefetch" href="https://dev-diary-2.disqus.com/"><title>Single Node Kubernetes Cluster - Deploying Kubernetes Dashboard | Devdiaries</title><meta name="generator" content="Jekyll v3.8.4" /><meta property="og:title" content="Single Node Kubernetes Cluster - Deploying Kubernetes Dashboard" /><meta name="author" content="Michal Fabjanski" /><meta property="og:locale" content="en_US" /><meta name="description" content="In the previous post, we have prepared an environment for work and installed Kubernetes and Docker. Now, we will deploy Kubernetes Dashboard. Deploy Kubernetes Dashboard Kubernetes Dashboard is web-based UI for Kbuernetes clusters. It allows to manage applications deployed in the cluster. Dashboard documentation is available at Kubernetes Github repo. Use the following command to deploy the dashboard on the cluster: kubectl apply -f kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml" /><meta property="og:description" content="In the previous post, we have prepared an environment for work and installed Kubernetes and Docker. Now, we will deploy Kubernetes Dashboard. Deploy Kubernetes Dashboard Kubernetes Dashboard is web-based UI for Kbuernetes clusters. It allows to manage applications deployed in the cluster. Dashboard documentation is available at Kubernetes Github repo. Use the following command to deploy the dashboard on the cluster: kubectl apply -f kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml" /><link rel="canonical" href="https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/" /><meta property="og:url" content="https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/" /><meta property="og:site_name" content="Devdiaries" /><meta property="og:image" content="https://www.devdiaries.net/images/single-node-kubernetes/single-node-kubernetes.jpg" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-07-14T00:00:00+00:00" /><script type="application/ld+json"> {"image":"https://www.devdiaries.net/images/single-node-kubernetes/single-node-kubernetes.jpg","description":"In the previous post, we have prepared an environment for work and installed Kubernetes and Docker. Now, we will deploy Kubernetes Dashboard. Deploy Kubernetes Dashboard Kubernetes Dashboard is web-based UI for Kbuernetes clusters. It allows to manage applications deployed in the cluster. Dashboard documentation is available at Kubernetes Github repo. Use the following command to deploy the dashboard on the cluster: kubectl apply -f kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/"},"@type":"BlogPosting","datePublished":"2019-07-14T00:00:00+00:00","url":"https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/","author":{"@type":"Person","name":"Michal Fabjanski"},"headline":"Single Node Kubernetes Cluster - Deploying Kubernetes Dashboard","dateModified":"2019-07-14T00:00:00+00:00","@context":"https://schema.org"}</script><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Replace these icons with your own. --><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/apple-icon-152x152.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/android-icon-192x192.png"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="icon" href="/favicon.ico" type="image/x-icon"><link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> <!-- Google Analytics code.<head> tag is the right place for analytics code as directed by Google. This is unofficial light version which loads blazing fast! Implemented for faster page load. --><script src="https://cdn.jsdelivr.net/npm/ga-lite@1/dist/ga-lite.min.js" async></script><script> var galite = galite || {}; galite.UA = 'UA-139553005-1';</script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js"></script></head><body><div class="loader"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div><div class="wrapper"><div class="container-grid"><div class="sidebar"><div class="author-container shadow"><div class="author"><img src="/images/ja.jpg" width="100%" height="auto;" alt="Devdiaries" onclick="location.href='/'"></div><div class="about text-center"><h1 class="title"><a href="/">Devdiaries</a></h1></div><div class="bio text-center"><p class="m0">Michael`s Blog</p></div><hr class="dashed"><div class="social text-center"> <ul class="portfolio p0"> <li><a href="/about/">About Me</a></li> <li><a href="/categories/">Categories</a></li> <li><a href="/contact/">Contact</a></li> </ul> <ul class="sm p0 m0a"> <li><a href="https://www.linkedin.com/in/michal-fabjanski"><i class="fa fa-linkedin"></i></a></li> <li><a href="https://github.com"><i class="fa fa-github"></i></a></li> </ul></div></div></div><div class="main"><div class="main-container shadow"><div class="title-space"> <h2>Single Node Kubernetes Cluster - Deploying Kubernetes Dashboard</h2></div><hr class="dashed"> <main> <ul class="breadcrumbs"> <li><a href="/">Home</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="#">Single node kuber...</a></li> </ul><div class="meta"> <p> <small> <span> <i class="fa fa-calendar" aria-hidden="true"></i> 14 Jul 2019&nbsp; </span> <span> <i class="fa fa-user" aria-hidden="true"></i> Michal Fabjanski&nbsp; </span> <span> <i class="fa fa-clock-o" aria-hidden="true"></i> 2 mins read. </span> </small> </p></div><div class="featured-image" style="background-image: url(/images/single-node-kubernetes/single-node-kubernetes.jpg)"></div><article> <ul class="toc rev clearfix"> <li><a href="#deploy-kubernetes-dashboard">Deploy Kubernetes Dashboard</a></li> <li><a href="#proxy-to-host-windows">Proxy to host Windows</a></li> <li><a href="#creating-a-service-account-and-a-role-binding-in-kubernetes">Creating a service account and a role binding in Kubernetes</a></li> <li><a href="#sign-in-to-kubernetes-dashboard">Sign in to Kubernetes Dashboard</a></li> <li><a href="#summary">Summary</a></li> </ul> <p><a href="https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-2/">In the previous post</a>, we have prepared an environment for work and installed Kubernetes and Docker. Now, we will deploy <strong>Kubernetes Dashboard</strong>.</p> <h3 id="deploy-kubernetes-dashboard">Deploy Kubernetes Dashboard</h3> <p>Kubernetes Dashboard is web-based UI for Kbuernetes clusters. It allows to manage applications deployed in the cluster. Dashboard documentation is available at <a href="https://github.com/kubernetes/dashboard">Kubernetes Github repo</a>. Use the following command to deploy the dashboard on the cluster:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">     
kubectl apply <span class="nt">-f</span> kubectl apply <span class="nt">-f</span> https://raw.githubusercontent.com/kubernetes/dashboard/v1.10.1/src/deploy/recommended/kubernetes-dashboard.yaml</code></pre></figure> <p>To access Dashboard from your Ubuntu you must create a secure channel to your Kubernetes cluster. Run the following command:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">kubectl proxy</code></pre></figure> <p>Now check in the new Putty window if dashboard is properly exposed:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">curl <span class="nt">-I</span> 127.0.0.1:8001</code></pre></figure> <p>You should see 200 OK Http response:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">michal@michal:~<span class="nv">$ </span>curl <span class="nt">-I</span> 127.0.0.1:8001
HTTP/1.1 200 OK
Content-Length: 2738
Content-Type: application/json
Date: Sun, 14 Jul 2019 10:07:39 GMT</code></pre></figure> <h3 id="proxy-to-host-windows">Proxy to host Windows</h3> <p>We will use the Windows browser to manage the cluster. To enable this run the following command in Ubuntu terminal:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">kubectl proxy <span class="nt">--address</span> 192.168.0.129 <span class="nt">--accept-hosts</span> <span class="s1">'^.*$'</span> <span class="nt">--port</span><span class="o">=</span>8001</code></pre></figure> <p>And go to <a href="http://192.168.0.129:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/login">http://192.168.0.129:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/login</a> in your browser on windows. You should have seen the dashboard login screen. Please remember to <strong>change my inet IP adrress 192.168.0.129 with your VM’s inet IP address</strong>. <img src="/images/single-node-kubernetes/kubernetes-login.JPG" alt="kubernetes-login" /></p> <h3 id="creating-a-service-account-and-a-role-binding-in-kubernetes">Creating a service account and a role binding in Kubernetes</h3> <p>To log in to our dashboard we need a service accout and a role binding. To create a service account, use the following command:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">kubectl create serviceaccount <span class="nt">--namespace</span> kube-system admin-user</code></pre></figure> <p>And for role binding:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">kubectl create clusterrolebinding admin-user <span class="nt">--clusterrole</span><span class="o">=</span>cluster-admin <span class="nt">--serviceaccount</span><span class="o">=</span>kube-system:admin-user</code></pre></figure> <h3 id="sign-in-to-kubernetes-dashboard">Sign in to Kubernetes Dashboard</h3> <p>There are several ways to log into the dashboard. We can genereate JWT token:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">kubectl <span class="nt">-n</span> kube-system describe secret <span class="k">$(</span>kubectl <span class="nt">-n</span> kube-system get secret | <span class="nb">grep </span>admin-user | <span class="nb">awk</span> <span class="s1">'{print $1}'</span><span class="k">)</span></code></pre></figure> <p>Copy generated token and use it when logging in to the dashboard: <img src="/images/single-node-kubernetes/kubernetes-token.JPG" alt="kubernetes-login" /></p> <p>Unfortunately, dashboard is only available via localhost. We can not log into the dashboard from the host system (Windows):</p> <blockquote> <p>Dashboard should not be exposed publicly using kubectl proxy command as it only allows HTTP connection. For domains other than localhost and 127.0.0.1 it will not be possible to sign in. Nothing will happen after clicking Sign in button on login page.</p> </blockquote> <p>So, we can create SSH tunnel or enable skip loging. I chose the second option:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">kubectl edit deployment/kubernetes-dashboard <span class="nt">--namespace</span><span class="o">=</span>kube-system</code></pre></figure> <p>Add <code class="highlighter-rouge">--enable-skip-login</code> to the deployment’s command line arguments:</p> <figure class="highlight"><pre><code class="language-sh" data-lang="sh">      containers:
      - args:
        - <span class="nt">--auto-generate-certificates</span>
        - <span class="nt">--enable-skip-login</span>            <span class="c"># &lt;-- add this line</span></code></pre></figure> <p><img src="/images/single-node-kubernetes/enable-skip-login.JPG" alt="kubernetes-login" /></p> <p>Now refresh the dashboard and click on the “skip” button. You will be correctly logged into the dashboard: <img src="/images/single-node-kubernetes/kubernetes-dashboard.JPG" alt="kubernetes-login" /></p> <h3 id="summary">Summary</h3> <p>We have already configured a single node cluster and a dashboard thanks. Now you can manage your applications in Kubernetes. If you have any problems, I invite you to comment.</p> </article> <hr class="dashed"><div class="row rev"><div class="col-md-12"><div class="share-box"> <i class="fa fa-share-alt" aria-hidden="true"></i> <a class="f nostyle" href="https://www.facebook.com/sharer/sharer.php?u=https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-facebook-official fa"></i></a> <a class="t nostyle" href="https://twitter.com/intent/tweet?text=&url=https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter fa"></i></a> <a class="g nostyle" href="https://plus.google.com/share?url=https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-google-plus fa"></i></a> <a class="r nostyle" href="http://www.reddit.com/submit?url=https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-reddit fa"></i></a> <a class="l nostyle" href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/&title=&summary=&source=dev-diary.github.io" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-linkedin fa"></i></a> <a class="e nostyle" href="mailto:?subject=&amp;body=Check&amp;out&amp;this&amp;site&amp;https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/"><i class="fa fa-envelope fa"></i></a></div></div></div><div class="row"><div class="col-md-12"> <p class="categories rev"> <span><a href="/categories/#kubernetes">Kubernetes</a></span></p></div></div><div id="disqus_thread"></div><script> var disqus_config = function () { this.page.url = 'https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/'; this.page.identifier = 'https://www.devdiaries.net/blog/Single-Node-Kubernetes-Cluster-Part-3/'; }; (function() { var d = document, s = d.createElement('script'); s.src = 'https://dev-diary-2.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> <!--<div class="comment-loader">--> <!--<button class="comments cards">Comments</button>--> <!--</div>--> <!--<div class="disqus hide">Loading comments&hellip;</div>--> <!--<div class="disqus-loading"></div>--> <!--<script>--> <!--/*--> <!-- disqusLoader.js v1.0--> <!-- A JavaScript plugin for lazy-loading Disqus comments widget.--> <!-- - --> <!-- By Osvaldas Valutis, www.osvaldas.info--> <!-- Available for use under the MIT License--> <!--*/--> <!--(function(b,f,l){var r=function(a){a=a.getBoundingClientRect();return{top:a.top+f.body.scrollTop,left:a.left+f.body.scrollLeft}},t=function(a,c){var d=f.createElement("script");d.src=a;d.async=!0;d.setAttribute("data-timestamp",+new Date);d.addEventListener("load",function(){"function"===typeof c&&c()});(f.head||f.body).appendChild(d)};l=function(a,c){var d,e;return function(){var g=this,f=arguments,b=+new Date;d&&b<d+a?(clearTimeout(e),e=setTimeout(function(){d=b;c.apply(g,f)},a)):(d=b,c.apply(g,--> <!--f))}};var m=!1,n=!1,p=!1,k=!1,h="unloaded",e=!1,q=function(){if(!e||!f.body.contains(e)||"loaded"==e.disqusLoaderStatus)return!0;var a=b.pageYOffset,c=r(e).top;if(c-a>b.innerHeight*n||0<a-c-e.offsetHeight-b.innerHeight*n)return!0;(a=f.getElementById("disqus_thread"))&&a.removeAttribute("id");e.setAttribute("id","disqus_thread");e.disqusLoaderStatus="loaded";"loaded"==h?DISQUS.reset({reload:!0,config:p}):(b.disqus_config=p,"unloaded"==h&&(h="loading",t(k,function(){h="loaded"})))};b.addEventListener("scroll",--> <!--l(m,q));b.addEventListener("resize",l(m,q));b.disqusLoader=function(a,c){var d={laziness:1,throttle:250,scriptUrl:!1,disqusConfig:!1},b=c,g,h={};for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&(h[g]=d[g]);for(g in b)Object.prototype.hasOwnProperty.call(b,g)&&(h[g]=b[g]);c=h;n=c.laziness+1;m=c.throttle;p=c.disqusConfig;k=!1===k?c.scriptUrl:k;e="string"===typeof a?f.querySelector(a):"number"===typeof a.length?a[0]:a;e.disqusLoaderStatus="unloaded";q()}})(window,document,0);--> <!--</script>--> <!--<script>--> <!-- disqusLoader( '.disqus',--> <!-- {--> <!-- scriptUrl: '//{"shortname"=>"dev-diary-2"}.disqus.com/embed.js',--> <!-- disqusConfig: function()--> <!-- {--><script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script> $(document).ready(function () { $(".loader").hide(); });</script><script> $("#search-input").keyup(function () { $("main").hide(); $("search-container").show(); if (!$('#search-input').val()) { $("main").show(); $("search-container").hide(); } });</script><script src="/js/jekyll-search.min.js" type="text/javascript"></script><script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-container'), searchResultTemplate: '<a class="nostyle" href="{url}"><div class="blog borders cards"><div class="image" style="background-image: url({image});"></div><div class="content"><h3 class="title">{title}</h3><p class="description">{description}</p></div></div></a>', noResultsText: 'No results found', json: '/search.json' })</script><script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script><script> AOS.init({ duration: 600, once: true, disable: 'mobile' });</script><script> $("button").click(function () { $(".disqus").toggle(); $(".comments").toggle(); });</script></body></html>